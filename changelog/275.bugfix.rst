Fix minor bugs for header slicing functionality and expand test coverage for edge-cases.
