.. _dkist:whatsnew:1.14:

*****
v1.14
*****

This release is focused on performance improvements, to both ASDF loading and to loading data out of the FITS files with dask.

ADSF File Updates
=================

This release includes a major change to how moasiced datasets are written to the metadata ASDF files, this leads to significantly faster loading times for these files.
This work was primarily motivated by future DL-NIRSP data, where the number of tiles is much higher than VBI, but it also improves VBI performance.
To benefit from these improvements the ASDF files will need to be regenerated by the the data center, which will happen at some point in the near future.
After that point mosaiced data will not be loadable with previous versions of the `dkist` library.


Dask Load Speed
===============

This release includes a significant change to how the array data is loaded from the FITS files into the Dask array.
The change reduced the complexity of the Dask graph, and yielded a ~2.5x load speed improvement on our benchmarks.

Thanks to `Sam Van Kooten <https://github.com/svank>`__ for this contribution.


A Note on ASDF Versions
=======================

Just before this release of `dkist` the `asdf` library released version 4.3.0, this includes a significant speed up to loading ASDF files with `dkist.load_dataset` (~80% faster).
We recommend you update.


Errors on old `dkist` Versions
==============================

As of this release, `dkist.load_dataset` will now error if your `dkist` version is too old to successfully load the ASDF file.
This is to prevent unexpected errors after loading the file.
If for some reason you want to bypass this behavior a new kwarg ``ignore_version_mismatch=True`` has been added to `dkist.load_dataset`.
